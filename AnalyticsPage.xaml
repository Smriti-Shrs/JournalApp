<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="JournalApp.AnalyticsPage"
             Title="Analytics"
             BackgroundColor="#f8fafc">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="16">
            <!-- Date range filter -->
            <Frame Padding="12" CornerRadius="10" HasShadow="True" BackgroundColor="White">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Filter by Date Range" FontAttributes="Bold" TextColor="#0f172a" />
                    <Grid ColumnDefinitions="Auto,*" ColumnSpacing="8" RowSpacing="8" RowDefinitions="Auto,Auto">
                        <Label Text="From:" VerticalOptions="Center" TextColor="#475569" />
                        <DatePicker x:Name="FromDatePicker" Grid.Column="1" />
                        <Label Grid.Row="1" Text="To:" VerticalOptions="Center" TextColor="#475569" />
                        <DatePicker x:Name="ToDatePicker" Grid.Row="1" Grid.Column="1" />
                    </Grid>
                    <Button Text="Update" Clicked="OnUpdateAnalyticsClicked" BackgroundColor="#6366f1" TextColor="White" />
                </VerticalStackLayout>
            </Frame>

            <!-- Summary cards -->
            <Grid ColumnDefinitions="*,*" ColumnSpacing="12" RowSpacing="12" Margin="0,10,0,0">
                <Frame Padding="12" CornerRadius="12" HasShadow="True" BackgroundColor="#6366f1">
                    <VerticalStackLayout>
                        <Label Text="Total Entries" FontAttributes="Bold" TextColor="White" FontSize="12" />
                        <Label x:Name="TotalEntriesRangeLabel" FontSize="20" FontAttributes="Bold" TextColor="White" />
                    </VerticalStackLayout>
                </Frame>
                <Frame Padding="12" CornerRadius="12" HasShadow="True" BackgroundColor="#06b6d4">
                    <VerticalStackLayout>
                        <Label Text="Current Streak" FontAttributes="Bold" TextColor="White" FontSize="12" />
                        <Label x:Name="CurrentStreakRangeLabel" FontSize="20" FontAttributes="Bold" TextColor="White" />
                    </VerticalStackLayout>
                </Frame>
                <Frame Padding="12" CornerRadius="12" HasShadow="True" BackgroundColor="#6366f1">
                    <VerticalStackLayout>
                        <Label Text="Longest Streak" FontAttributes="Bold" TextColor="White" FontSize="12" />
                        <Label x:Name="LongestStreakRangeLabel" FontSize="20" FontAttributes="Bold" TextColor="White" />
                    </VerticalStackLayout>
                </Frame>
                <Frame Padding="12" CornerRadius="12" HasShadow="True" BackgroundColor="#06b6d4">
                    <VerticalStackLayout>
                        <Label Text="Missed Days" FontAttributes="Bold" TextColor="White" FontSize="12" />
                        <Label x:Name="MissedDaysRangeLabel" FontSize="20" FontAttributes="Bold" TextColor="White" />
                    </VerticalStackLayout>
                </Frame>
            </Grid>

            <!-- Mood distribution bar (simple stacked labels) -->
            <Label Text="Mood Distribution" FontAttributes="Bold" Margin="0,20,0,0" />
            <VerticalStackLayout>
                <Label x:Name="MoodDistributionLabel" />
            </VerticalStackLayout>

            <!-- Most frequent mood -->
            <Label Text="Most Frequent Mood" FontAttributes="Bold" Margin="0,20,0,0" />
            <Label x:Name="MostFrequentMoodLabel" />

            <!-- Writing statistics -->
            <Label Text="Writing Statistics" FontAttributes="Bold" Margin="0,20,0,0" />
            <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                <Frame Padding="10" BackgroundColor="{DynamicResource CardBackgroundColor}" CornerRadius="12"
                       BorderColor="{DynamicResource PrimaryColor}">
                    <VerticalStackLayout>
                        <Label Text="Total Words" FontAttributes="Bold" />
                        <Label x:Name="TotalWordsLabel" FontSize="20" />
                    </VerticalStackLayout>
                </Frame>
                <Frame Padding="10" Grid.Column="1" BackgroundColor="{DynamicResource CardBackgroundColor}" CornerRadius="12"
                       BorderColor="{DynamicResource PrimaryColor}">
                    <VerticalStackLayout>
                        <Label Text="Average per Entry" FontAttributes="Bold" />
                        <Label x:Name="AveragePerEntryLabel" FontSize="20" />
                    </VerticalStackLayout>
                </Frame>
            </Grid>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
