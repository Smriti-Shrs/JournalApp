<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="JournalApp.DashboardPage"
             Title="Dashboard">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">
            <!-- Enhanced Header -->
            <Frame Padding="20" CornerRadius="18" HasShadow="False" Margin="0">
                <Frame.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                        <GradientStop Color="#7c3aed" Offset="0.0" />
                        <GradientStop Color="#a855f7" Offset="1.0" />
                    </LinearGradientBrush>
                </Frame.Background>
                <VerticalStackLayout>
                    <Label Text="ðŸ“” Your Journal Dashboard"
                           FontSize="28"
                           FontAttributes="Bold"
                           TextColor="White" />
                    <Label Text="Track your thoughts, moods, and journaling progress"
                           FontSize="14"
                           TextColor="White"
                           Opacity="0.95" />
                </VerticalStackLayout>
            </Frame>

            <!-- Stat Cards Grid -->
            <Grid ColumnDefinitions="*,*,*,*" ColumnSpacing="12" RowSpacing="12">
                <!-- Total Entries -->
                <Frame Padding="12" CornerRadius="14" HasShadow="True" Margin="0">
                    <Frame.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#7c3aed" Offset="0.0" />
                            <GradientStop Color="#a855f7" Offset="1.0" />
                        </LinearGradientBrush>
                    </Frame.Background>
                    <VerticalStackLayout>
                        <Label Text="ðŸ“ Total Entries" FontAttributes="Bold" TextColor="White" FontSize="12" />
                        <Label x:Name="TotalEntriesLabel" Text="0" FontSize="28" FontAttributes="Bold" TextColor="White" />
                    </VerticalStackLayout>
                </Frame>

                <!-- Current Streak -->
                <Frame Padding="12" Grid.Column="1" CornerRadius="14" HasShadow="True" Margin="0">
                    <Frame.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#ec4899" Offset="0.0" />
                            <GradientStop Color="#f43f5e" Offset="1.0" />
                        </LinearGradientBrush>
                    </Frame.Background>
                    <VerticalStackLayout>
                        <Label Text="ðŸ”¥ Current Streak" FontAttributes="Bold" TextColor="White" FontSize="12" />
                        <Label x:Name="CurrentStreakLabel" Text="0 days" FontSize="28" FontAttributes="Bold" TextColor="White" />
                    </VerticalStackLayout>
                </Frame>

                <!-- Longest Streak -->
                <Frame Padding="12" Grid.Column="2" CornerRadius="14" HasShadow="True" Margin="0">
                    <Frame.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#3b82f6" Offset="0.0" />
                            <GradientStop Color="#0ea5e9" Offset="1.0" />
                        </LinearGradientBrush>
                    </Frame.Background>
                    <VerticalStackLayout>
                        <Label Text="â­ Longest Streak" FontAttributes="Bold" TextColor="White" FontSize="12" />
                        <Label x:Name="LongestStreakLabel" Text="0 days" FontSize="28" FontAttributes="Bold" TextColor="White" />
                    </VerticalStackLayout>
                </Frame>

                <!-- Average Words -->
                <Frame Padding="12" Grid.Column="3" CornerRadius="14" HasShadow="True" Margin="0">
                    <Frame.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#10b981" Offset="0.0" />
                            <GradientStop Color="#14b8a6" Offset="1.0" />
                        </LinearGradientBrush>
                    </Frame.Background>
                    <VerticalStackLayout>
                        <Label Text="ðŸ“Š Avg Words" FontAttributes="Bold" TextColor="White" FontSize="12" />
                        <Label x:Name="AverageWordsLabel" Text="0" FontSize="28" FontAttributes="Bold" TextColor="White" />
                    </VerticalStackLayout>
                </Frame>
            </Grid>

            <!-- Streaks Details Section -->
            <Frame Padding="16" CornerRadius="14" HasShadow="False" BorderColor="#7c3aed" BorderThickness="2" Margin="0">
                <VerticalStackLayout Spacing="12">
                    <Label Text="ðŸ“ˆ Streaks Analytics" FontAttributes="Bold" FontSize="18" />
                    <Frame Padding="12" CornerRadius="10" BackgroundColor="#fef3c7" HasShadow="False" Margin="0">
                        <Grid ColumnDefinitions="Auto,*" ColumnSpacing="8">
                            <Label Text="ðŸ“…" FontSize="18" />
                            <VerticalStackLayout Grid.Column="1">
                                <Label Text="Keep your streak alive!" FontAttributes="Bold" TextColor="#92400e" />
                                <Label x:Name="MissedDaysLabel" Text="Missed Days: 0" FontSize="12" TextColor="#b45309" />
                            </VerticalStackLayout>
                        </Grid>
                    </Frame>
                </VerticalStackLayout>
            </Frame>

            <!-- Mood Distribution Section -->
            <Frame Padding="16" CornerRadius="14" HasShadow="False" BorderColor="#f59e0b" BorderThickness="2" Margin="0">
                <VerticalStackLayout Spacing="12">
                    <Label Text="ðŸ˜Š Mood Distribution" FontAttributes="Bold" FontSize="18" />
                    
                    <VerticalStackLayout Spacing="8">
                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="8">
                            <Label Text="ðŸ˜Š Positive" FontAttributes="Bold" VerticalOptions="Center" />
                            <ProgressBar Grid.Column="1" x:Name="PositiveProgressBar" Progress="0" ProgressColor="#10b981" />
                            <StackLayout Grid.Column="2" Orientation="Horizontal" Spacing="4" HorizontalOptions="End">
                                <Label x:Name="PositivePercentLabel" Text="0%" FontAttributes="Bold" VerticalOptions="Center" />
                                <Label x:Name="PositiveCountLabel" Text="(0)" FontSize="12" VerticalOptions="Center" />
                            </StackLayout>
                        </Grid>

                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="8">
                            <Label Text="ðŸ˜ Neutral" FontAttributes="Bold" VerticalOptions="Center" />
                            <ProgressBar Grid.Column="1" x:Name="NeutralProgressBar" Progress="0" ProgressColor="#6366f1" />
                            <StackLayout Grid.Column="2" Orientation="Horizontal" Spacing="4" HorizontalOptions="End">
                                <Label x:Name="NeutralPercentLabel" Text="0%" FontAttributes="Bold" VerticalOptions="Center" />
                                <Label x:Name="NeutralCountLabel" Text="(0)" FontSize="12" VerticalOptions="Center" />
                            </StackLayout>
                        </Grid>

                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="8">
                            <Label Text="ðŸ˜¢ Negative" FontAttributes="Bold" VerticalOptions="Center" />
                            <ProgressBar Grid.Column="1" x:Name="NegativeProgressBar" Progress="0" ProgressColor="#ef4444" />
                            <StackLayout Grid.Column="2" Orientation="Horizontal" Spacing="4" HorizontalOptions="End">
                                <Label x:Name="NegativePercentLabel" Text="0%" FontAttributes="Bold" VerticalOptions="Center" />
                                <Label x:Name="NegativeCountLabel" Text="(0)" FontSize="12" VerticalOptions="Center" />
                            </StackLayout>
                        </Grid>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Recent Entries Section -->
            <Frame Padding="16" CornerRadius="14" HasShadow="False" BorderColor="#10b981" BorderThickness="2" Margin="0">
                <VerticalStackLayout Spacing="12">
                    <Label Text="ðŸ“ Recent Entries" FontAttributes="Bold" FontSize="18" />
                    <CollectionView x:Name="RecentEntriesCollectionView" HeightRequest="200">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Frame Padding="10" Margin="0,4" CornerRadius="10" HasShadow="False" BorderColor="#e5e7eb" BorderThickness="1">
                                    <Grid ColumnDefinitions="Auto,*" ColumnSpacing="12">
                                        <Label Text="{Binding EntryDate, StringFormat='{}{0:MMM dd}'}"
                                               FontAttributes="Bold"
                                               TextColor="#7c3aed"
                                               FontSize="12" />
                                        <Label Grid.Column="1"
                                               Text="{Binding Title}"
                                               LineBreakMode="TailTruncation"
                                               FontSize="14" />
                                    </Grid>
                                </Frame>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>
                </VerticalStackLayout>
            </Frame>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
